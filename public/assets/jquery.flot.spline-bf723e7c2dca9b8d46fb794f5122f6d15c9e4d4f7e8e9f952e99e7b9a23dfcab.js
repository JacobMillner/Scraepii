!function(t){"use strict";function e(t,e,i,n,s,o,r){var a,l,h,c,u,d,p,f,g=Math.pow,m=Math.sqrt;return a=m(g(i-t,2)+g(n-e,2)),l=m(g(s-i,2)+g(o-n,2)),h=r*a/(a+l),c=r-h,u=i+h*(t-s),d=n+h*(e-o),p=i-c*(t-s),f=n-c*(e-o),[u,d,p,f]}function i(e,i,n,s,o){var r=t.color.parse(o);r.a="number"==typeof s?s:.3,r.normalize(),r=r.toString(),i.beginPath(),i.moveTo(e[0][0],e[0][1]);for(var a=e.length,l=0;a>l;l++)i[e[l][3]].apply(i,e[l][2]);i.stroke(),i.lineWidth=0,i.lineTo(e[a-1][0],n),i.lineTo(e[0][0],n),i.closePath(),s!==!1&&(i.fillStyle=r,i.fill())}function n(t,e,i,n){(void 0===e||"bezier"!==e&&"quadratic"!==e)&&(e="quadratic"),e+="CurveTo",0==o.length?o.push([i[0],i[1],n.concat(i.slice(2)),e]):"quadraticCurveTo"==e&&2==i.length?(n=n.slice(0,2).concat(i),o.push([i[0],i[1],n,e])):o.push([i[2],i[3],n.concat(i.slice(2)),e])}function s(s,r,a){if(a.splines.show===!0){var l,h,c,u=[],d=a.splines.tension||.5,p=a.datapoints.points,f=a.datapoints.pointsize,g=s.getPlotOffset(),m=p.length,v=[];if(o=[],4>m/f)return void t.extend(a.lines,a.splines);for(l=0;m>l;l+=f)h=p[l],c=p[l+1],null==h||h<a.xaxis.min||h>a.xaxis.max||c<a.yaxis.min||c>a.yaxis.max||v.push(a.xaxis.p2c(h)+g.left,a.yaxis.p2c(c)+g.top);for(m=v.length,l=0;m-2>l;l+=2)u=u.concat(e.apply(this,v.slice(l,l+6).concat([d])));for(r.save(),r.strokeStyle=a.color,r.lineWidth=a.splines.lineWidth,n(r,"quadratic",v.slice(0,4),u.slice(0,2)),l=2;m-3>l;l+=2)n(r,"bezier",v.slice(l,l+4),u.slice(2*l-2,2*l+2));n(r,"quadratic",v.slice(m-2,m),[u[2*m-10],u[2*m-9],v[m-4],v[m-3]]),i(o,r,s.height()+10,a.splines.fill,a.color),r.restore()}}var o=[];t.plot.plugins.push({init:function(t){t.hooks.drawSeries.push(s)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery);